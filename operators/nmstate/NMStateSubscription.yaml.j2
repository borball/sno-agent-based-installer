{% set default_source='redhat-operators' -%}
{% for item in customs|select(attribute='provide', value='redhat-operators') -%}
  {% set default_source=item.name -%}
{% endfor -%}
---
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  labels:
    operators.coreos.com/kubernetes-nmstate-operator.openshift-nmstate: ""
  name: kubernetes-nmstate-operator
  namespace: openshift-nmstate
spec:
  channel: stable
  installPlanApproval: Automatic
  name: kubernetes-nmstate-operator
  source: {{ source | default(default_source) }}

  sourceNamespace: openshift-marketplace
